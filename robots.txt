# Watchlist Exporter Browser Extension

## Project Overview
This is a browser extension (Chrome, Firefox, Safari compatible) that exports watchlists 
from streaming platforms (Netflix, Prime Video, Disney+, Hulu) to IMDB-compatible CSV files.

## Repository Structure
- manifest.json       - Extension manifest file (Chrome Extension Manifest V3)
- background.js       - Service worker for context menu, icon management, and CSV export
- content.js          - Content script that extracts watchlist data from streaming sites
- popup.html          - Extension popup UI HTML
- popup.css           - Styling for the popup UI
- popup.js            - Popup functionality and user interaction handling
- icons/              - Extension icons (active/inactive states)
- README.md           - User-facing documentation
- INSTALLATION.md     - Installation instructions for different browsers

## Key Files to Understand

### manifest.json
- Defines extension permissions and configurations
- Lists supported streaming platforms
- Configures content scripts and service worker

### content.js
- Extracts watchlist data from streaming platform pages
- Implements platform-specific selectors for Netflix, Prime Video, Hulu, Disney+
- Handles lazy-loading by scrolling to load all content
- Validates that user is on correct watchlist page
- Returns error if not on watchlist page (background script handles loading)

### background.js
- Manages context menu (right-click export option)
- Controls extension icon states (active/inactive)
- Converts extracted data to IMDB-compatible CSV format
- Handles file downloads with platform-specific filenames

### popup.js
- Provides UI for manual export trigger
- Communicates with content script to extract data
- Handles export process and user feedback

## Development Notes
- No build process required - this is a pure JavaScript extension
- No external dependencies or package managers
- No automated tests currently implemented
- Extension runs entirely client-side with no external API calls

## Important Implementation Details
1. All extraction functions are async to handle lazy-loaded content
2. Context menu only enabled on watchlist pages, not homepages
3. CSV format is IMDB-compatible with 16 columns
4. Filenames follow pattern: {platform}-watchlist-YYYY-MM-DD.csv
5. Automatic scrolling implemented to capture all watchlist items
6. Background tab loading: if user is on homepage, watchlist page is loaded in a hidden background tab, data is extracted, and tab is closed automatically
7. 2-second delay after page load ensures content is fully rendered before extraction

## Common Tasks
- Testing: Load extension in browser developer mode and test on actual streaming sites
- Debugging: Use browser console on streaming sites to see content script logs
- Modifying selectors: Update platform-specific extraction functions in content.js
